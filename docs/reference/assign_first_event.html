<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Assign the earliest event, when there are multiple events — assign_first_event • bllFlow</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>


<meta property="og:title" content="Assign the earliest event, when there are multiple events — assign_first_event" />

<meta property="og:description" content="Finds the earliest date and returns the event and date for that event. Use 
when there are multiple events and dates. Each row represents an observation.
 The output of this function creates a variable that is used for survival 
 models and predictive algorithms.
Input are lists of event dates for the main event (outcome), competing event
(optional) and withdraw event (optional). The maximum follow-up time must be 
specified (followup_time).
The lists should be the same length but, if not, the return list is the same 
length as the longest input list.
Note: if making events using `make_event_dates`. The`make_event_dates` function
 randomly assigns event dates and therefore there will be withdraw events 
 that 'occur' before 'main events'. This means that the main event rate will
 be lower than the original starting data." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">bllFlow</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/bllFlow.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Workflow
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/0_workflow.html">Workflow overview</a>
    </li>
    <li>
      <a href="../articles/1_data.html">1 - Data templates and examples</a>
    </li>
    <li>
      <a href="../articles/2_data_clean.html">2 - Data cleaning and transformation</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/Big-Life-Lab/bllFlow">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Assign the earliest event, when there are multiple events</h1>
    <small class="dont-index">Source: <a href='https://github.com/Big-Life-Lab/bllFlow/blob/master/R/assign-first-event.R'><code>R/assign-first-event.R</code></a></small>
    <div class="hidden name"><code>assign_first_event.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Finds the earliest date and returns the event and date for that event. Use 
when there are multiple events and dates. Each row represents an observation.
 The output of this function creates a variable that is used for survival 
 models and predictive algorithms.</p>
<p>Input are lists of event dates for the main event (outcome), competing event
(optional) and withdraw event (optional). The maximum follow-up time must be 
specified (followup_time).</p>
<p>The lists should be the same length but, if not, the return list is the same 
length as the longest input list.</p>
<p>Note: if making events using `make_event_dates`. The`make_event_dates` function
 randomly assigns event dates and therefore there will be withdraw events 
 that 'occur' before 'main events'. This means that the main event rate will
 be lower than the original starting data.</p>
    
    </div>

    <pre class="usage"><span class='fu'>assign_first_event</span>(<span class='no'>main_events</span>, <span class='kw'>competing_events</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>withdraw_events</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='no'>followup_time</span>, <span class='kw'>main_label</span> <span class='kw'>=</span> <span class='st'>"main event"</span>,
  <span class='kw'>competing_label</span> <span class='kw'>=</span> <span class='st'>"competing event"</span>,
  <span class='kw'>withdraw_label</span> <span class='kw'>=</span> <span class='st'>"withdraw from study"</span>, <span class='kw'>units</span> <span class='kw'>=</span> <span class='fl'>NA</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>main_events</th>
      <td><p>The main outcome or event. A list of  numbers 
(typically integers) that represent a unit of time (typically days).</p></td>
    </tr>
    <tr>
      <th>competing_events</th>
      <td><p>The competing event (optional). A list of  numbers 
(typically integers) that represent a unit of time (typically days).</p></td>
    </tr>
    <tr>
      <th>withdraw_events</th>
      <td><p>The withdraw event (optional). A list of  numbers 
(typically integers) that represent a unit of time (typically days).</p></td>
    </tr>
    <tr>
      <th>followup_time</th>
      <td><p>The follow-up time period (optinal). A number (typically 
and integer). 'end of study' will be the assigned censor event if any event 
(main, competing or withdraw events) has the value equal the followup_time.</p></td>
    </tr>
    <tr>
      <th>main_label</th>
      <td><p>(optional) Label for the main event (default = 
"main event").</p></td>
    </tr>
    <tr>
      <th>competing_label</th>
      <td><p>(optional) Label for the competing risk event (default
= "competing event").</p></td>
    </tr>
    <tr>
      <th>withdraw_label</th>
      <td><p>(optional) Label for the withdraw event (default =
"withdraw form study")</p></td>
    </tr>
    <tr>
      <th>units</th>
      <td><p>(optional) Time unit (e.g. "days", default = NA)
#' @return data frame with two variables:
     a) 'censor_event' - factor with levels and labels of the different 
     potential first events:
             1 = "main event"
             2 = "competing event"
             3 = "withdraw from study"
             4 = "end of study"
     b) 'censor_time' - time to event. Number (usually an integer).
Returned data.frame length = length of original lists. 
Event date =  followup_tme (censored), if no event.</p></td>
    </tr>
    </table>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'># NOT RUN {</span>
<span class='co'>#' # load the test data in the bllFlow package</span>
  <span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/as.data.frame'>as.data.frame</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/read.table'>read.csv</a></span>(<span class='st'>"inst/extdata/RESPECT-EOL_validation.csv"</span>))

<span class='co'># or</span>
<span class='co'>#  df &lt;- RESPECT-EOL_validation</span>

<span class='co'># if you don't have the bllFlow package loded.</span>
 <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/source'>source</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/file.path'>file.path</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/getwd'>getwd</a></span>(), <span class='st'>'R/make-event-dates.R'</span>))

<span class='co'># create event data. Each new variable is a list of events that is the same</span>
<span class='co'># length, nrow(df), as the orginial data, df.</span>
  <span class='no'>death</span>    <span class='kw'>&lt;-</span> <span class='fu'>make_event_date</span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/nrow'>nrow</a></span>(<span class='no'>df</span>), <span class='no'>df</span>$<span class='no'>risk</span>, <span class='fl'>1825</span>, <span class='kw'>label</span> <span class='kw'>=</span> <span class='st'>'death'</span>, <span class='kw'>units</span> <span class='kw'>=</span> <span class='st'>'days'</span>)
  <span class='no'>competing</span>   <span class='kw'>&lt;-</span> <span class='fu'>make_event_date</span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/nrow'>nrow</a></span>(<span class='no'>df</span>), <span class='fl'>0.2</span>, <span class='fl'>1825</span>, <span class='kw'>label</span> <span class='kw'>=</span> <span class='st'>'censor'</span>, <span class='kw'>units</span> <span class='kw'>=</span> <span class='st'>'days'</span>)
  <span class='no'>withdraw</span> <span class='kw'>&lt;-</span> <span class='fu'>make_event_date</span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/nrow'>nrow</a></span>(<span class='no'>df</span>), <span class='fl'>0.40</span>, <span class='fl'>1825</span>, <span class='kw'>label</span> <span class='kw'>=</span> <span class='st'>'withdraw'</span>, <span class='kw'>units</span> <span class='kw'>=</span> <span class='st'>'days'</span>)

<span class='co'># now find with event occurred first and assign the follow-up time to that event.</span>
  <span class='no'>censor</span> <span class='kw'>&lt;-</span> <span class='fu'>assign_first_event</span>(<span class='no'>death</span>, <span class='kw'>competing_events</span> <span class='kw'>=</span> <span class='no'>competing</span>,
    <span class='kw'>withdraw_events</span> <span class='kw'>=</span> <span class='no'>withdraw</span>, <span class='kw'>followup_time</span> <span class='kw'>=</span> <span class='fl'>1825</span>, <span class='kw'>units</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/difftime'>units</a></span>(<span class='no'>death</span>))
<span class='co'># the return is a data.frame (censor) with two new variables:</span>
<span class='co'># censor$censor_event and censor$censor_time</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/summary'>summary</a></span>(<span class='no'>censor</span>)

<span class='co'># you can add (mutate) the new variables to the original data</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/library'>library</a></span>(<span class='no'>dplyr</span>)
<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='no'>df</span> <span class='kw'>%&gt;%</span> <span class='fu'><a href='http://dplyr.tidyverse.org/reference/bind.html'>bind_cols</a></span>(<span class='no'>censor</span>)

<span class='co'># }</span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
            
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Yulric Sequeira, Doug Manuel, Meltem Tuna.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.2.0.</p>
</div>
      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: '7277d80fe94c128628bf7b3251cf7a5d',
    indexName: 'bllFlow',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>


  </body>
</html>

